<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <link type="text/css" rel="stylesheet" href="css/search.css">
    <link type="image/png" rel="icon" href="nebfavi.ico">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/search.js"></script>

    <style type="text/css">
    html,
    body,
    #map-canvas {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpoimjrIsfJvzEwdo56mTU9IwRQMAy9RU">
    </script>
    <script>
    function writeAddressName(latLng) {
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({
                "location": latLng
            },
            function(results, status) {
                if (status == google.maps.GeocoderStatus.OK)
                    document.getElementById("address").innerHTML = results[0].formatted_address;
                else
                    document.getElementById("error").innerHTML += "Unable to retrieve your address" + "<br />";
            });
    }

    function geolocationSuccess(position) {
        var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        // Write the formatted address
        writeAddressName(userLatLng);

        var myOptions = {
            zoom: 10,
            center: userLatLng,
            streetViewControl: false,
            zoomControl: true,
            overviewMapControl: true,
            mapTypeControl: false,
            panControl: true,
            scaleControl: true,
            styles: [{
                "featureType": "all",
                "elementType": "all",
                "stylers": [{
                    "invert_lightness": true
                }, {
                    "saturation": 10
                }, {
                    "lightness": 30
                }, {
                    "gamma": 0.5
                }, {
                    "hue": "#435158"
                }]
            }]
        };
        // Draw the map
        var mapObject = new google.maps.Map(document.getElementById("map"), myOptions);
        // Place the marker
        var marker = new google.maps.Marker({
            map: mapObject,
            position: userLatLng,
            animation: google.maps.Animation.DROP
        });

        marker.setIcon('http://maps.google.com/mapfiles/ms/icons/blue-dot.png');
    }

    function geolocationError(positionError) {
        document.getElementById("error").innerHTML += "Error: " + positionError.message + "<br />";
    }

    function geolocateUser() {
        // If the browser supports the Geolocation API
        if (navigator.geolocation) {
            var positionOptions = {
                enableHighAccuracy: true,
                timeout: 10 * 1000 // 10 seconds
            };
            navigator.geolocation.getCurrentPosition(geolocationSuccess, geolocationError, positionOptions);
        } else
            document.getElementById("error").innerHTML += "Your browser doesn't support the Geolocation API";
    }

    window.onload = geolocateUser;
    </script>
    <style type="text/css">
    #map {
        width: 100%;
        height: 50%;
    }
    h1,
    p {
        text-align: center;
    }
    </style>

    <title>Nebula | Available Spaces</title>
</head>

<body>
    <div id="map"></div>
    <br>
    <p><b>Address</b>: <span id="address"></span>
    </p>
    <p id="error"></p>
    <br>
    <div class="wrapper">
        <div id="NotHere">
            <a href="add-space.html">Not your scene? Add a space!</a>
            <!--Add the link for the add a space page-->
        </div>
        <!--<div class="header">
			NEBULA: Find Your Space.
		</div>
		<div class="nav">
			<ul>
				<li><a href="#">Home<a></li>
				<li><a href="#">More Spaces</a>
					<ul id="sub">
						<li>Art</li>
						<li>Co-Working</li>
						<li>Haker</li>
						<li>Maker</li>
						<li>Music</li>
						<li>Writing</li>
					</ul>
				</li>
				<li>FAQ</li>
				<li><a href="#">About Us<a></li>
				<li><a href="#">Contact Us<a></li>
			</ul>
		</div>-->
        <div class="content">

        </div>
    </div>
</body>
<html>
